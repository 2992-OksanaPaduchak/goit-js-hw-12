{"version":3,"file":"index.js","sources":["../src/img/iconError.svg","../src/js/pixaday-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["export default \"data:image/svg+xml,%3c!--%20Generated%20by%20IcoMoon.io%20--%3e%3csvg%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20width='32'%20height='32'%20viewBox='0%200%2032%2032'%3e%3cpath%20fill='%23fafafb'%20d='M9.080%200.292c0.181-0.18%200.431-0.292%200.706-0.292%200%200%200%200%200%200h12.427c0%200%200%200%200%200%200.276%200%200.525%200.112%200.706%200.292l8.788%208.788c0.18%200.181%200.292%200.431%200.292%200.706%200%200%200%200%200%200v-0%2012.427c0%200%200%200%200%200%200%200.276-0.112%200.525-0.292%200.706l-8.788%208.788c-0.181%200.18-0.43%200.292-0.706%200.292-0%200-0%200-0%200h-12.427c-0%200-0%200-0%200-0.276%200-0.525-0.112-0.706-0.292l-8.788-8.788c-0.18-0.181-0.292-0.43-0.292-0.706%200-0%200-0%200-0v0-12.427c0-0%200-0%200-0%200-0.276%200.112-0.525%200.292-0.706l8.788-8.788zM10.2%202l-8.2%208.2v11.6l8.2%208.2h11.6l8.2-8.2v-11.6l-8.2-8.2h-11.6z'%3e%3c/path%3e%3cpath%20fill='%23fafafb'%20d='M9.292%209.292c0.181-0.181%200.431-0.294%200.708-0.294s0.527%200.112%200.708%200.294l5.292%205.293%205.292-5.293c0.181-0.181%200.431-0.293%200.708-0.293%200.553%200%201.001%200.448%201.001%201.001%200%200.277-0.112%200.527-0.293%200.708l-5.293%205.292%205.293%205.292c0.16%200.177%200.257%200.412%200.257%200.671%200%200.554-0.449%201.003-1.003%201.003-0.258%200-0.494-0.098-0.671-0.258l0.001%200.001-5.292-5.293-5.292%205.293c-0.181%200.18-0.431%200.291-0.707%200.291-0.553%200-1.001-0.447-1.003-0.999v-0c0-0.276%200.112-0.527%200.293-0.708l5.293-5.292-5.292-5.292c-0.181-0.181-0.294-0.431-0.294-0.708s0.112-0.527%200.294-0.708l0-0z'%3e%3c/path%3e%3c/svg%3e\"","import axios from 'axios';\n\nconst instance = axios.create({\n    baseURL: 'https://pixabay.com',\n    params: {\n        key: '48977888-b03943cb340f5b9503aa6f8a3',\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: 'true',     \n        \n    }\n});\n\nexport async function getAllPhoto(params) {\n    return await instance.get('/api', {params});    \n};","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nfunction renderItemGallery(item) {\n    return `\n        <li class=\"gallery-item\">\n            <a class=\"gallery-link\" href=\"${item.largeImageURL}\">\n                <img class=\"gallery-image\"\n                src=\"${item.webformatURL}\"\n                data-source=\"${item.largeImageURLl}\"\n                alt=\"${item.tags}\"/>\n            </a>\n            <div class=\"photo-info\">\n                <span>likes: ${item.likes}</span>\n                <span>Views: ${item.views}</span>\n                <span>Comments: ${item.comments}</span>\n                <span>Downloads: ${item.downloads}</span>\n            </div>\n        </li>\n    `\n}\n\nexport function renderGallery(listHits) {\n    const listHTML = listHits\n        .map(item => renderItemGallery(item))\n        .join('');\n    \n    document.querySelector('ul.gallery').insertAdjacentHTML('beforeend', listHTML)\n    \n     new SimpleLightbox('.gallery a', {\n        captionsData: 'alt',\n        captionDelay: 250,\n     });\n}","import \"izitoast/dist/css/iziToast.min.css\";\n\nimport iconError from \"./img/iconError.svg\";\nimport iziToast from \"izitoast\";\nimport { getAllPhoto } from './js/pixaday-api'\nimport { renderGallery } from './js/render-functions'\n\n\nconst form = document.querySelector('form');\nconst loader = document.querySelector('.loader__container');\nconst galleryImage = document.querySelector('ul.gallery');\nconst btnLoadMore = document.querySelector('.js-btn-load');\n\nlet params = {\n    query: '',\n    page: 1,\n    total: [],\n    per_page: 40,\n}\n\nform.addEventListener('submit', async (evt) => {\n    evt.preventDefault();\n\n    const query = evt.target.query.value.trim()\n\n    if (query === \"\") {\n        errorNotification('Fill please field');\n        return;\n    }\n\n    params = {\n        ...params,\n        query,\n        page: 1,\n        total: []\n    };\n\n    await requestData();\n\n    if (!params.total.length) {\n        errorNotification('Sorry, there are no images matching your search query. Please try again!');\n        return;\n    }\n\n    galleryImage.innerHTML = '';\n    form.reset();\n    renderGallery(params.total);\n    checkBtnStatus();\n\n});\n\nbtnLoadMore.addEventListener('click', async () => {\n\n    params = {\n        ...params,\n        page: params.page + 1,\n    }\n    await requestData();\n\n    renderGallery(params.total);\n    checkBtnStatus();\n    scrollGallery();\n});\n\n\nfunction checkBtnStatus() {\n\n    if (params.total.length < params.per_page) {\n        btnLoadMore.classList.add('hidden');\n        iziToast.show({\n            message: \"We're sorry, but you've reached the end of search results.\",\n            backgroundColor: \"#ef4040\",\n            messageColor: \"#fff\",\n            position: \"bottomRight\",\n        });\n    } else {\n        btnLoadMore.classList.remove('hidden');    \n    }\n};\n\nfunction scrollGallery() {\n    const height = galleryImage.firstElementChild.getBoundingClientRect().height\n    window.scrollBy({\n        top: height * 2,\n        behavior: 'smooth'\n    })\n}\n\nfunction requestData() {\n    loader.style.display = 'flex'\n\n    return new Promise(async (resolve, reject) => {\n        try {\n            \n            const res = await getAllPhoto({\n                q: params.query,\n                page: params.page,\n                per_page: params.per_page\n            });\n\n            params.total = res.data.hits;            \n            resolve(params.total);\n        } catch (e) {\n            reject(e);\n            showErrorMessage(\"Failed to load more images. Please try again later.\");\n        } finally {\n            loader.style.display = 'none';\n        }\n    })\n}\n\nfunction errorNotification(message) {\n    iziToast.show({\n        message,\n        iconUrl: iconError,\n        title: 'Error',\n        titleColor: '#fff',\n        titleSize: '16px',\n        titleLineHeight: '24px',\n        messageSize: '16px',\n        messageLineHeight: '24px',\n        messageColor: '#fff',\n        backgroundColor: '#ef4040',\n        position: 'topRight',\n    });\n}\n\n"],"names":["iconError","instance","axios","getAllPhoto","params","renderItemGallery","item","renderGallery","listHits","listHTML","SimpleLightbox","form","loader","galleryImage","btnLoadMore","evt","query","errorNotification","requestData","checkBtnStatus","scrollGallery","iziToast","height","resolve","reject","res","e","message"],"mappings":"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"}